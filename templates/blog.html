<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{modules/layout :: layout(
        title = ${(theme.config.blog != null
                  and theme.config.blog.seo != null
                  and theme.config.blog.seo.title != null
                  and !#strings.isEmpty(theme.config.blog.seo.title)
                  ? (theme.config.blog.seo.subtitle != null
                     and !#strings.isEmpty(theme.config.blog.seo.subtitle)
                     ? theme.config.blog.seo.title + ' - ' + theme.config.blog.seo.subtitle
                     : theme.config.blog.seo.title)
                  : 'Asorn')},
        content = ~{::content},
        head = ~{::head}
      )}">
  <th:block
    th:fragment="head"
    th:with="blogConfig=${theme.config.blog},
             seoConfig=${blogConfig != null ? blogConfig.seo : null},
             blogDescription=${seoConfig != null and seoConfig.description != null and !#strings.isEmpty(seoConfig.description) ? seoConfig.description : 'Welcome to my open source blog'}"
  >
    <meta
      name="description"
      th:attr="content=${blogDescription}"
    />
  </th:block>
  <th:block th:fragment="content"
            th:with="blogConfig=${theme.config.blog},
                     blogItems=${blogConfig != null and blogConfig.items != null ? blogConfig.items : null}">
    <div class="blog">
      <div class="blog-left">
        <div class="blog-left-line"><img th:src="${#theme.assets('/images/blog/line-dot.svg')}"></div>
      </div>
      <div class="blog-list" th:if="${blogItems != null and !#lists.isEmpty(blogItems)}">
        <div class="item" th:each="item,iterStat : ${blogItems}">
          <a th:href="${item.url != null and !#strings.isEmpty(item.url) ? item.url : '#'}"
             th:target="${item.target != null and !#strings.isEmpty(item.target) ? item.target : '_blank'}">
            <div class="text">
              <div class="title-area">
                <div class="title">
                  <div class="name" th:text="${item.title}"></div>
                  <div class="link"> ↗</div>
                </div>
                <div class="tag" th:if="${item.is_pinned != null and item.is_pinned}">✨</div>
              </div>
              <div class="desc" th:text="${item.desc}"></div>
            </div>
            <div class="info">
              <div class="info-avatar">
                <img
                  th:src="${item.avatar != null and !#strings.isEmpty(item.avatar) ? item.avatar : #theme.assets('/images/blog/avatar.svg')}"
                  alt="avatar"
                />
              </div>
              <div class="info-name" th:text="${item.author != null and !#strings.isEmpty(item.author) ? item.author : 'Asorn'}">Asorn</div>
              <div class="info-time" th:text="${item.time != null and !#strings.isEmpty(item.time) ? item.time : '1970-01-01'}">1970-01-01</div>
            </div>
          </a>
          <div class="content-divider" th:if="${!iterStat.last}"></div>
        </div>
      </div>
    </div>
  </th:block>
</html>
